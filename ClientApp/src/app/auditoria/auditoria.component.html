<!-- <mat-progress-bar mode="query" *ngIf = "showSpinner"></mat-progress-bar> -->
<app-nav-menu></app-nav-menu>

<section>
  <div class="container-fluid">
    <div class="row">
      <div class="col-xl-10 col-lg-9 col-md-8 ml-auto">
        <div class="row pt-md-5 mt-md-3 mb-5">
          <div class="col-md-12">
            <div class="content">
              <div class="content animated fadeInUp">
                <div class="container-fluid">
                  <div class="row">
                    <div class="col-md-12">
                      <div class="card">
                        <div class="header">
                          <button class="navbar-toggler bg-light" class="close" aria-label="Close" type="button" data-toggle="modal" data-target="#modalCart">
                            <img src="assets/que-hacer.png" alt="Consulta de productores">
                          </button>

                          <h4 class="title">Registro de Auditoria</h4>
                        </div>

                        <div class="content">

                          <mat-horizontal-stepper linear #stepper>

                          <!-- mat-step first -->
                          <mat-step [stepControl]="firstFormGroup">
                            <form [formGroup]="firstFormGroup">

                              <div class="row">
                                <div class="col-md-4">
                                  <div class="form-group">
                                    <label>Nombre del auditor</label>
                                    <input type="text" class="form-control" formControlName="nombre" [ngClass]="{ 'is-invalid': submitted && f.nombre.errors }" [(ngModel)]="tecnico.nombre" placeholder="Nombre del auditor" readonly>
                                    <div *ngIf="submitted && f.nombre.errors" class="invalid-feedback">
                                      <div *ngIf="f.nombre.errors.required">Campo requerido</div>
                                    </div>
                                  </div>
                                </div>

                                <div class="col-md-4">
                                  <div class="form-group">
                                    <label>Fecha de control</label>
                                    <input type="text" class="form-control" formControlName="fechaVisita" [ngClass]="{ 'is-invalid': submitted && f.fechaVisita.errors }" [(ngModel)]="fechaVisita" placeholder="fecha de control interno" readonly>
                                    <div *ngIf="submitted && f.fechaVisita.errors" class="invalid-feedback">
                                      <div *ngIf="f.fechaVisita.errors.required">Campo requerido</div>
                                    </div>
                                  </div>
                                </div>

                                <div class="col-md-4">
                                  <div class="form-group">
                                    <label>Hora de inicio</label>
                                    <input type="text" class="form-control" formControlName="hora" [(ngModel)]="hora" [ngClass]="{ 'is-invalid': submitted && f.hora.errors }" placeholder="hora de inicio" readonly>
                                    <div *ngIf="submitted && f.hora.errors" class="invalid-feedback">
                                      <div *ngIf="f.hora.errors.required">Campo requerido</div>
                                    </div>
                                  </div>
                                </div>

                                <!-- <div class="col-md-3">
                                  <div class="form-group">
                                    <label>Hora final</label>
                                    <input type="text" class="form-control" placeholder="Hora final">
                                  </div>
                                </div> -->
                              </div>
                              <!--  -->

                              <div class="row">
                                <div class="col-md-4">
                                  <div class="form-group">
                                    <label>Código Asoseynekun</label>
                                    <input type="text" class="form-control" formControlName="codigoCafetero" [ngClass]="{ 'is-invalid': submitted && f.codigoCafetero.errors }" [(ngModel)]="productor.codigoCafetero" placeholder="Código Asoseynekun" readonly>
                                    <div *ngIf="submitted && f.codigoCafetero.errors" class="invalid-feedback">
                                      <div *ngIf="f.codigoCafetero.errors.required">Campo requerido</div>
                                    </div>
                                  </div>
                                </div>

                                <div class="col-md-4">
                                  <div class="form-group">
                                    <label>Productor</label>
                                    <input type="text" class="form-control" formControlName="nombreP" [ngClass]="{ 'is-invalid': submitted && f.nombreP.errors }" [(ngModel)]="productor.nombre" placeholder="Productor" readonly>
                                    <div *ngIf="submitted && f.nombreP.errors" class="invalid-feedback">
                                      <div *ngIf="f.nombreP.errors.required">Campo requerido</div>
                                    </div>
                                  </div>
                                </div>

                                <div class="col-md-4">
                                  <div class="form-group">
                                    <label>Cedula</label>
                                    <input type="text" class="form-control" formControlName="id" [ngClass]="{ 'is-invalid': submitted && f.id.errors }" [(ngModel)]="productor.id" placeholder="Cedula" readonly>
                                    <div *ngIf="submitted && f.id.errors" class="invalid-feedback">
                                      <div *ngIf="f.id.errors.required">Campo requerido</div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <!--  -->

                              <div class="row">
                                <div class="col-md-5">
                                  <div class="form-group">
                                    <label>Celular del Productor y/o contacto</label>
                                    <input type="text" class="form-control" formControlName="NumeroTelefono" [ngClass]="{ 'is-invalid': submitted && f.NumeroTelefono.errors }" [(ngModel)]="productor.numeroTelefono" placeholder="Celular del Productor y/o contacto" readonly>
                                    <div *ngIf="submitted && f.NumeroTelefono.errors" class="invalid-feedback">
                                      <div *ngIf="f.NumeroTelefono.errors.required">Campo requerido</div>
                                    </div>
                                  </div>
                                </div>

                                <div class="col-md-5">
                                  <div class="form-group">
                                    <label>Vereda, Municipio:</label>
                                    <input type="text" class="form-control" formControlName="municipio"  [(ngModel)]="veredaMunicipio" placeholder="Vereda, Municipio:" readonly>
                                    <!-- <div *ngIf="submitted && f.municipio.errors" class="invalid-feedback">
                                      <div *ngIf="f.municipio.errors.required">Campo requerido</div>
                                    </div> -->
                                  </div>
                                </div>
                              </div>
                              <!--  -->

                              <div class="row">
                                <div class="col-md-5">
                                  <div class="form-group">
                                    <label>Fecha de ingreso</label>
                                    <input type="text" class="form-control" formControlName="fechaRegistro" [(ngModel)]="productor.fechaRegistro" placeholder="Fecha de ingreso" readonly>
                                  </div>
                                </div>

                                <div class="col-md-5">
                                  <div class="form-group">
                                    <label>Nombre Finca</label>
                                    <input type="text" class="form-control" formControlName="nombrePredio" [(ngModel)]="productor.nombrePredio" placeholder="Nombre Finca" readonly>
                                  </div>
                                </div>
                              </div>
                              <!--  -->

                              <div class="row">
                                <div class="col-md-11">
                                  <div class="form-group">
                                    <label>Nombre y parentesco de quien recibe la visita</label>
                                    <input type="text" class="form-control" formControlName="recibeVisita" [(ngModel)]="visitaAuditoria.recibeVisita" placeholder="Nombre y parentesco de quien recibe la visita">
                                  </div>
                                </div>
                              </div>

                              <div class="pt-3">
                                <h5 class="title-center title">Cultivos presentados para la certificacion</h5>
                              </div>
                              <form>
                                <div class="table-responsive table-full-width">
                                  <table class="table table-striped table-bordered">
                                    <thead>
                                          <tr>
                                              <th class="title">Cultivo</th>
                                              <th class="title">Área</th>
                                              <th class="title">Producción obtenida (últimos 12 meses), kg</th>
                                              <th class="title">Producción estimada (próximos 12 meses), kg</th>
                                              <th class="title">Sustancia y última fecha aplicación no permitida</th>
                                              <th class="title">Accion</th>
                                          </tr>
                                    </thead>
                                    <tbody>
                                      <!-- eliminar -->
                                        <tr *ngFor="let cultivoPresentado of CultivosPrensetados; let i = index">
                                          <td>
                                            <input type="text" class="form-control" name="{{cultivoPresentado.cultivo}}" [(ngModel)]="cultivoPresentado.cultivo">
                                          </td>

                                          <td>
                                            <input type="number" class="form-control" name="{{cultivoPresentado.area}}" [(ngModel)]="cultivoPresentado.area">
                                          </td>

                                          <td>
                                            <input type="text" class="form-control" name="{{cultivoPresentado.produccionObtenida}}" [(ngModel)]="cultivoPresentado.produccionObtenida">
                                          </td>

                                          <td>
                                            <input type="text" class="form-control" name="{{cultivoPresentado.produccionEstimada}}" [(ngModel)]="cultivoPresentado.produccionEstimada">
                                          </td>

                                          <td>
                                            <input type="text" class="form-control" name="{{cultivoPresentado.sustanciaNoPermitida}}" [(ngModel)]="cultivoPresentado.sustanciaNoPermitida">
                                          </td>

                                          <td>
                                            <button class="badge btn" (click)="deleteCultivoPresentado(i)">
                                              <img src="assets/dejar.png" alt="">
                                            </button>
                                          </td>
                                        </tr>
                                        <!-- agregar -->
                                        <tr>
                                          <td>
                                            <input type="text" class="form-control" name="{{NewCultivoPresentados.cultivo+index}}" [(ngModel)]="NewCultivoPresentados.cultivo">
                                          </td>

                                          <td>
                                            <input type="number" class="form-control" name="{{NewCultivoPresentados.area+index}}" [(ngModel)]="NewCultivoPresentados.area">
                                          </td>

                                          <td>
                                            <input type="text" class="form-control" name="{{NewCultivoPresentados.produccionObtenida+index}}" [(ngModel)]="NewCultivoPresentados.produccionObtenida">
                                          </td>

                                          <td>
                                            <input type="text" class="form-control" name="{{NewCultivoPresentados.produccionEstimada+index}}" [(ngModel)]="NewCultivoPresentados.produccionEstimada">
                                          </td>

                                          <td>
                                            <input type="text" class="form-control" name="{{NewCultivoPresentados.sustanciaNoPermitida+index}}" [(ngModel)]="NewCultivoPresentados.sustanciaNoPermitida">
                                          </td>

                                          <td>
                                              <button  class="badge btn" (click)="addCultivoPresentado()">
                                                <img src="assets/comprobado.png" alt="">
                                              </button>
                                          </td>
                                        </tr>
                                    </tbody>
                                  </table>
                                </div>
                              </form>

                              <form>
                                <div class="pt-3">
                                  <h5 class="title title-center">Otros usos del suelo en la finca</h5>
                                </div>

                                <div class="table-responsive table-full-width">
                                  <table class="table table-striped table-bordered">
                                    <thead>
                                      <tr>
                                        <th class="title">Cultivo</th>
                                        <th class="title">Área</th>
                                        <th class="title">Orgánico/Convencional</th>
                                        <th class="title">Uso</th>
                                        <th class="title">Es un riesgo para los cultivos en certificación (S/N)</th>
                                        <th class="title">Accion</th>

                                      </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor=" let otrosCultivo of otrosCultivos; let i = index">
                                          <td>
                                            <input type="text" class="form-control" name="{{otrosCultivo.cultivo}}" [(ngModel)]="otrosCultivo.cultivo">
                                          </td>

                                          <td>
                                            <input type="number" class="form-control" name="{{otrosCultivo.area}}" [(ngModel)]="otrosCultivo.area">
                                          </td>

                                          <td>
                                            <input type="text" class="form-control" name="{{otrosCultivo.tipoOrganico}}" [(ngModel)]="otrosCultivo.tipoOrganico">
                                          </td>

                                          <td>
                                            <input type="text" class="form-control" name="{{otrosCultivo.uso}}" [(ngModel)]="otrosCultivo.uso">
                                          </td>

                                          <td>
                                            <input type="text" class="form-control" name="{{otrosCultivo.riesgo}}" [(ngModel)]="otrosCultivo.riesgo">
                                          </td>

                                          <td>
                                            <button class="badge btn" (click)="deleteotrosCultivos(i)">
                                              <img src="assets/dejar.png" alt="">
                                            </button>
                                          </td>

                                        </tr>
                                        <tr>
                                          <td>
                                            <input type="text" class="form-control" name="{{NewUsoOtrosCultivos.cultivo}}+index" [(ngModel)]="NewUsoOtrosCultivos.cultivo">
                                          </td>

                                          <td>
                                            <input type="number" class="form-control" name="{{NewUsoOtrosCultivos.area}}+index" [(ngModel)]="NewUsoOtrosCultivos.area">
                                          </td>

                                          <td>
                                            <input type="text" class="form-control" name="{{NewUsoOtrosCultivos.tipoOrganico}}+index" [(ngModel)]="NewUsoOtrosCultivos.tipoOrganico">
                                          </td>

                                          <td>
                                            <input type="text" class="form-control" name="{{NewUsoOtrosCultivos.uso}}+index" [(ngModel)]="NewUsoOtrosCultivos.uso">
                                          </td>

                                          <td>
                                            <input type="text" class="form-control" name="{{NewUsoOtrosCultivos.riesgo}}+index" [(ngModel)]="NewUsoOtrosCultivos.riesgo">
                                          </td>

                                          <td>
                                              <button  class="badge btn" (click)="addotrosCultivos()">
                                                <img src="assets/comprobado.png" alt="">
                                              </button>
                                          </td>
                                        </tr>
                                    </tbody>
                                  </table>
                                </div>
                              </form>

                              <!--<div class="pt-3">
                                <h5 class="title title-center">Evaluacion compromisos de mejoramiento ultima visita</h5>
                              </div>

                               <div class="table-responsive table-full-width">
                                <table class="table table-striped table-bordered">
                                  <thead>
                                        <tr>
                                            <th class="title">Código Criterio</th>
                                            <th class="title">Acción Correctiva</th>
                                            <th class="title">Completado (Si/No)</th>
                                            <th class="title">Si no se realizó, razones</th>
                                            <th class="title">Accion</th>
                                        </tr>
                                  </thead>
                                  <tbody>
                                      <tr *ngFor="let evaluacionCompromiso of EvaluacionCompromisos; let i = index">

                                        <td>
                                          <input type="text" class="form-control" name="{{evaluacionCompromiso.codigo}}+index" [(ngModel)]="evaluacionCompromiso.codigo">
                                        </td>

                                        <td>
                                          <input type="text" class="form-control" name="{{evaluacionCompromiso.accionCorrectiva}}+index" [(ngModel)]="evaluacionCompromiso.accionCorrectiva">
                                        </td>

                                        <td>
                                          <input type="text" class="form-control" name="{{evaluacionCompromiso.completado}}+index" [(ngModel)]="evaluacionCompromiso.completado">
                                        </td>

                                        <td>
                                          <input type="text" class="form-control" name="{{evaluacionCompromiso.razones}}+index" [(ngModel)]="evaluacionCompromiso.razones">
                                        </td>

                                        <td>
                                          <button class="badge btn" (click)="deleteEvaluacionCompromisos(i)">
                                            <img src="assets/dejar.png" alt="">
                                          </button>
                                        </td>
                                      </tr>

                                      <tr>
                                        <td>
                                        <input type="text" class="form-control" name="{{NewEvaluacionCompromiso.completado}}+index" [(ngModel)]="NewEvaluacionCompromiso.completado">
                                        </td>
                                        <td>
                                          <input type="text" class="form-control" name="{{NewEvaluacionCompromiso.accionCorrectiva}}+index" [(ngModel)]="NewEvaluacionCompromiso.accionCorrectiva">
                                        </td>
                                        <td>
                                          <input type="text" class="form-control" name="{{NewEvaluacionCompromiso.completado}}+index" [(ngModel)]="NewEvaluacionCompromiso.completado">
                                        </td>
                                        <td>
                                          <input type="text" class="form-control" name="{{NewEvaluacionCompromiso.razones}}+index" [(ngModel)]="NewEvaluacionCompromiso.razones">
                                        </td>
                                        <td>
                                          <button  class="badge btn" (click)="addEvaluacionCompromisos()">
                                            <img src="assets/comprobado.png" alt="">
                                          </button>
                                        </td>
                                      </tr>

                                  </tbody>
                                </table>
                              </div> -->

                              <div class="row pager mt-3">
                                <div class="col"></div>
                                <div class="col-ml-5 pull-right ">
                                  <button type="submit" class="btn btn-info btn-fill " (click)="onSubmit()" matStepperNext>siguiente</button>
                                </div>
                              </div>

                            </form>
                          </mat-step>
                          <!-- end mat-step first -->


                          <mat-step>
                            <!-- segundo step -->
                              <ng-template matStepLabel></ng-template>
                              <form>
                            <!-- CONSERVACIÓN DE LA BIODIVERSIDAD -->
                            <div class="form-group">
                              <div class="pb-3">
                                <h4 class="title">Punto de evaluación</h4>
                              </div>
                              <div class="title title-center">
                                CONSERVACIÓN DE LA BIODIVERSIDAD
                              </div>
                              <div class="table-responsive table-full-width">
                                <table class="table table-striped table-bordered">
                                  <thead>
                                    <th class="title">
                                      Pregunta
                                    </th>
                                    <th class="title">
                                      Respuesta
                                    </th>
                                    <th class="title">
                                      JUSTIFICACION/COMENTARIOS
                                    </th>
                                  </thead>
                                  <tbody>
                                    <tr>
                                      <td class="title">
                                        CB1. No se amplió las áreas de cultivo en zonas dedicadas a la conservación de bosques
                                      </td>
                                      <td>
                                        <select class="form-control" name="respuestaCB1" [(ngModel)]="CB.respuestaCB1">
                                          <option value="NA">NA</option>
                                          <option value="CUM">CUM</option>
                                          <option value="NO CUM">NO CUM</option>
                                        </select>
                                      </td>
                                      <td>
                                        <input type="text" class="form-control" name="justificacionCB1" [(ngModel)]="CB.justificacionCB1">
                                      </td>
                                    </tr>
                                    <tr>
                                      <td class="title">
                                        CB2. El café y otros cultivos son cultivados en forma asociada entre si o con árboles de sombra.
                                      </td>
                                      <td>
                                        <select class="form-control" name="respuestaCB2" [(ngModel)]="CB.respuestaCB2">
                                          <option value="NA">NA</option>
                                          <option value="CUM">CUM</option>
                                          <option value="NO CUM">NO CUM</option>
                                        </select>
                                      </td>
                                      <td>
                                        <input type="text" class="form-control" name="justificacionCB2" [(ngModel)]="CB.justificacionCB2">
                                      </td>
                                    </tr>
                                    <tr>
                                      <td class="title">
                                        Comentario/Otras prácticas de conservación de la biodiversidad observadas:
                                      </td>
                                      <td colspan="2">
                                        <input type="text" class="form-control" name="comentarioCB" [(ngModel)]="CB.comentarioCB">
                                      </td>
                                    </tr>
                                  </tbody>
                                </table>
                              </div>
                            </div>

                            <!-- MANEJO Y CONSERVACIÓN DEL AGUA -->
                            <div class="form-group">
                              <div class="title title-center">
                                MANEJO Y CONSERVACIÓN DEL AGUA
                              </div>
                              <div class="table-responsive table-full-width">
                                <table class="table table-striped table-bordered">
                                  <thead>
                                    <th class="title">
                                      Pregunta
                                    </th>
                                    <th class="title">
                                      Respuesta
                                    </th>
                                    <th class="title">
                                      JUSTIFICACION/COMENTARIOS
                                    </th>
                                  </thead>
                                  <tbody>
                                    <tr>
                                      <td class="title">
                                        MA1. Se realizan prácticas que reducen el consumo de agua. Menciónelas en "comentarios".
                                      </td>
                                      <td>
                                        <select class="form-control" name="respuestaMA1" [(ngModel)]="MA.respuestaMA1">
                                          <option value="NA">NA</option>
                                          <option value="CUM">CUM</option>
                                          <option value="NO CUM">NO CUM</option>
                                        </select>
                                      </td>
                                      <td>
                                        <input type="text" class="form-control" name="justificacionMA1" [(ngModel)]="MA.justificacionMA1">
                                      </td>
                                    </tr>
                                    <tr>
                                      <td class="title">
                                        MA2.Se respetan zonas de protección de nacimientos y quebradas.
                                      </td>
                                      <td>
                                        <select class="form-control" name="respuestaMA2" [(ngModel)]="MA.respuestaMA2">
                                          <option value="NA">NA</option>
                                          <option value="CUM">CUM</option>
                                          <option value="NO CUM">NO CUM</option>
                                        </select>
                                      </td>
                                      <td>
                                        <input type="text" class="form-control" name="justificacionMA2" [(ngModel)]="MA.justificacionMA2">
                                      </td>
                                    </tr>
                                    <tr>
                                      <td class="title">
                                        MA3. El origen del agua utilizada para labores agrícolas es apropiado y conocido. Mencione las fuentes de agua usadas en “comentarios”
                                      </td>
                                      <td>
                                        <select class="form-control" name="respuestaMA3" [(ngModel)]="MA.respuestaMA3">
                                          <option value="NA">NA</option>
                                          <option value="CUM">CUM</option>
                                          <option value="NO CUM">NO CUM</option>
                                        </select>
                                      </td>
                                      <td>
                                        <input type="text" class="form-control" name="justificacionMA3" [(ngModel)]="MA.justificacionMA3">
                                      </td>
                                    </tr>
                                    <tr>
                                      <td class="title">
                                        MA4. Existen estudios o evaluaciones del estado de las aguas en la unidad productiva o de la cuenca regional de captación en los últimos cuatro años, No es un riesgo para el producto.
                                      </td>
                                      <td>
                                        <select class="form-control" name="respuestaMA4" [(ngModel)]="MA.respuestaMA4">
                                          <option value="NA">NA</option>
                                          <option value="CUM">CUM</option>
                                          <option value="NO CUM">NO CUM</option>
                                        </select>
                                      </td>
                                      <td>
                                        <input type="text" class="form-control" name="justificacionMA4" [(ngModel)]="MA.justificacionMA4">
                                      </td>
                                    </tr>
                                    <tr>
                                      <td class="title">
                                        Comentario/Otras prácticas de manejo y conservación del agua observadas:
                                      </td>
                                      <td colspan="2">
                                        <input type="text" class="form-control" name="comentarioMA" [(ngModel)]="MA.comentarioMA">
                                      </td>
                                    </tr>
                                  </tbody>
                                </table>
                              </div>
                            </div>

                            <!-- MANEJO DE SEMILLAS Y MATERIAL DE PROPAGACIÓN -->
                            <div class="form-group">
                              <div class="title title-center">
                                MANEJO DE SEMILLAS Y MATERIAL DE PROPAGACIÓN
                              </div>
                              <div class="table-responsive table-full-width">
                                <table class="table table-striped table-bordered">
                                  <thead>
                                    <th class="title">
                                      Pregunta
                                    </th>
                                    <th class="title">
                                      Respuesta
                                    </th>
                                    <th class="title">
                                      JUSTIFICACION/COMENTARIOS
                                    </th>
                                  </thead>
                                  <tbody>
                                    <tr>
                                      <td class="title">
                                        MSE1. Indique en &quot;comentarios&quot; para cuales cultivos se usa semilla y/o material de propagación obtenido en la propia
                                        finca
                                      </td>
                                      <td>
                                        <select class="form-control" name="respuestaMSE1" [(ngModel)]="MSE.respuestaMSE1">
                                          <option value="NA">NA</option>
                                          <option value="CUM">CUM</option>
                                          <option value="NO CUM">NO CUM</option>
                                        </select>
                                      </td>
                                      <td>
                                        <input type="text" class="form-control" name="justificacionMSE1" [(ngModel)]="MSE.justificacionMSE1">
                                      </td>
                                    </tr>
                                    <tr>
                                      <td class="title">
                                        MSE2. Indique en &quot;comentarios&quot; para cuales cultivos se compra semilla y/o material de propagación de origen
                                          comercial, sin tratamiento con sustancias químicas, no OGM
                                      </td>
                                      <td>
                                        <select class="form-control" name="respuestaMSE2" [(ngModel)]="MSE.respuestaMSE2">
                                          <option value="NA">NA</option>
                                          <option value="CUM">CUM</option>
                                          <option value="NO CUM">NO CUM</option>
                                        </select>
                                      </td>
                                      <td>
                                        <input type="text" class="form-control" name="justificacionMSE2" [(ngModel)]="MSE.justificacionMSE2">
                                      </td>
                                    </tr>
                                    <tr>
                                      <td class="title">
                                        MSE3. Si se realizan viveros en la finca, se utiliza sustrato e insumos permitidos durante su producción.
                                      </td>
                                      <td>
                                        <select class="form-control" name="respuestaMSE3" [(ngModel)]="MSE.respuestaMSE3">
                                          <option value="NA">NA</option>
                                          <option value="CUM">CUM</option>
                                          <option value="NO CUM">NO CUM</option>
                                        </select>
                                      </td>
                                      <td>
                                        <input type="text" class="form-control" name="justificacionMSE3" [(ngModel)]="MSE.justificacionMSE3">
                                      </td>
                                    </tr>
                                    <tr>
                                      <td class="title">
                                        Comentario/Otras prácticas de manejo de semillas y material de propagación:
                                      </td>
                                      <td colspan="2">
                                        <input type="text" class="form-control" name="comentarioMSE" [(ngModel)]="MSE.comentarioMSE">
                                      </td>
                                    </tr>
                                  </tbody>
                                </table>
                              </div>
                            </div>

                            <!-- MANEJO DE INSECTOS, ENFERMEDADES Y ARVENSES -->
                            <div class="form-group">
                              <div class="title title-center">
                                MANEJO DE INSECTOS, ENFERMEDADES Y ARVENSES
                              </div>
                              <div class="table-responsive table-full-width">
                                <table class="table table-striped table-bordered">
                                  <thead>
                                    <th class="title">
                                      Pregunta
                                    </th>
                                    <th class="title">
                                      Respuesta
                                    </th>
                                    <th class="title">
                                      JUSTIFICACION/COMENTARIOS
                                    </th>
                                  </thead>
                                  <tbody>
                                    <tr>
                                      <td class="title">
                                        MIES1. Las principales plagas y enfermedades son conocidas y observadas en los cultivos principales. Indique las plagas
                                        y enfermedades relevantes en &quot;comentarios&quot;
                                      </td>
                                      <td>
                                        <select class="form-control" name="respuestaMIES1" [(ngModel)]="MIES.respuestaMIES1">
                                          <option value="NA">NA</option>
                                          <option value="CUM">CUM</option>
                                          <option value="NO CUM">NO CUM</option>
                                        </select>
                                      </td>
                                      <td>
                                        <input type="text" class="form-control" name="justificacionMIES1" [(ngModel)]="MIES.justificacionMIES1">
                                      </td>
                                    </tr>
                                    <tr>
                                      <td class="title">
                                        MIES2. Las principales plagas y enfermedades son conocidas y observadas en los cultivos secundarios. Indique las
                                        plagas y enfermedades relevantes en &quot;comentarios&quot;
                                      </td>
                                      <td>
                                        <select class="form-control" name="respuestaMIES2" [(ngModel)]="MIES.respuestaMIES2">
                                          <option value="NA">NA</option>
                                          <option value="CUM">CUM</option>
                                          <option value="NO CUM">NO CUM</option>
                                        </select>
                                      </td>
                                      <td>
                                        <input type="text" class="form-control" name="justificacionMIES2" [(ngModel)]="MIES.justificacionMIES2">
                                      </td>
                                    </tr>
                                    <tr>
                                      <td class="title">
                                        MIES3. Se aplican prácticas de prevención como el uso de variedades adaptadas y locales, cercas vivas, asociación e
                                        intercalado de cultivo, entre otras son aplicadas. Indicar cuales en &quot;comentarios&quot;.
                                      </td>
                                      <td>
                                        <select class="form-control" name="respuestaMIES3" [(ngModel)]="MIES.respuestaMIES3">
                                          <option value="NA">NA</option>
                                          <option value="CUM">CUM</option>
                                          <option value="NO CUM">NO CUM</option>
                                        </select>
                                      </td>
                                      <td>
                                        <input type="text" class="form-control" name="justificacionMIES3" [(ngModel)]="MIES.justificacionMIES3">
                                      </td>
                                    </tr>
                                    <tr>
                                      <td class="title">
                                        MIES4. Se aplica control cultural y/o mecánico de arvenses. Indicar en &quot;comentarios&quot; el tipo de control cultural
                                        (machete, azadón, quema controlada, otros)
                                      </td>
                                      <td>
                                        <select class="form-control" name="respuestaMIES4" [(ngModel)]="MIES.respuestaMIES4">
                                          <option value="NA">NA</option>
                                          <option value="CUM">CUM</option>
                                          <option value="NO CUM">NO CUM</option>
                                        </select>
                                      </td>
                                      <td>
                                        <input type="text" class="form-control" name="justificacionMIES4" [(ngModel)]="MIES.justificacionMIES4">
                                      </td>
                                    </tr>
                                    <tr>
                                      <td class="title">
                                        MIES5. En caso de usar insumos para el control de plagas, enfermedades y arvenses, los insumos utilizados hacen parte
                                        de la lista de &quot;insumos permitidos&quot; y se utilizan adecuadamente según el caso. Indicar en &quot;comentarios&quot; los insumos
                                        usados en los últimos 12 meses
                                      </td>
                                      <td>
                                        <select class="form-control" name="respuestaMIES5" [(ngModel)]="MIES.respuestaMIES5">
                                          <option value="NA">NA</option>
                                          <option value="CUM">CUM</option>
                                          <option value="NO CUM">NO CUM</option>
                                        </select>
                                      </td>
                                      <td>
                                        <input type="text" class="form-control" name="justificacionMIES5" [(ngModel)]="MIES.justificacionMIES5">
                                      </td>
                                    </tr>
                                    <tr>
                                      <td class="title">
                                        Comentario/Otras prácticas de manejo de insectos, enfermedades y arvenses:
                                      </td>
                                      <td colspan="2">
                                        <input type="text" class="form-control" name="comentarioMIES" [(ngModel)]="MIES.comentarioMIES">
                                      </td>
                                    </tr>
                                  </tbody>
                                </table>
                              </div>
                            </div>

                            <!-- MANEJO DEL SUELO -->

                            <div class="form-group">
                              <div class="title title-center">
                                MANEJO DEL SUELO
                              </div>
                              <div class="table-responsive table-full-width">
                                <table class="table table-striped table-bordered">
                                  <thead>
                                    <th class="title">
                                      Pregunta
                                    </th>
                                    <th class="title">
                                      Respuesta
                                    </th>
                                    <th class="title">
                                      JUSTIFICACION/COMENTARIOS
                                    </th>
                                  </thead>
                                  <tbody>
                                    <tr>
                                      <td class="title">
                                        MS1. Se tiene un plan de fertilidad (escrito o verbal) que contribuya al mejoramiento del suelo basado en la experiencia
                                        del productor o en análisis de suelos. Especifique en &quot;comentarios&quot;.
                                      </td>
                                      <td>
                                        <select class="form-control" name="respuestaMS1" [(ngModel)]="MS.respuestaMS1">
                                          <option value="NA">NA</option>
                                          <option value="CUM">CUM</option>
                                          <option value="NO CUM">NO CUM</option>
                                        </select>
                                      </td>
                                      <td>
                                        <input type="text" class="form-control" name="justificacionMS1" [(ngModel)]="MS.justificacionMS1">
                                      </td>
                                    </tr>
                                    <tr>
                                      <td class="title">
                                        MS2. Acciones como curvas a nivel, terrazas, barreras vivas, estacones, entre otros se están aplicando para la
                                        prevención y control de la erosión.
                                      </td>
                                      <td>
                                        <select class="form-control" name="respuestaMIES2" [(ngModel)]="MS.respuestaMS2">
                                          <option value="NA">NA</option>
                                          <option value="CUM">CUM</option>
                                          <option value="NO CUM">NO CUM</option>
                                        </select>
                                      </td>
                                      <td>
                                        <input type="text" class="form-control" name="justificacionMS2" [(ngModel)]="MS.justificacionMS2">
                                      </td>
                                    </tr>
                                    <tr>
                                      <td class="title">
                                        MS3. Al realizar las desyerbas del cultivo, se cuida de dejar el suelo cubierto de coberturas vivas y/o muertas
                                        favoreciendo el control de la erosión y la protección del suelo.
                                      </td>
                                      <td>
                                        <select class="form-control" name="respuestaMS3" [(ngModel)]="MS.respuestaMS3">
                                          <option value="NA">NA</option>
                                          <option value="CUM">CUM</option>
                                          <option value="NO CUM">NO CUM</option>
                                        </select>
                                      </td>
                                      <td>
                                        <input type="text" class="form-control" name="justificacionMS3" [(ngModel)]="MS.justificacionMS3">
                                      </td>
                                    </tr>
                                    <tr>
                                      <td class="title">
                                        MS4. Los abonos utilizados hacen parte de la lista de &quot;insumos permitidos&quot; y se utilizan adecuadamente, según el caso.
                                        Indique cuales insumos fueron usados en los últimos 12 meses en &quot;comentarios&quot;
                                      </td>
                                      <td>
                                        <select class="form-control" name="respuestaMS4" [(ngModel)]="MS.respuestaMS4">
                                          <option value="NA">NA</option>
                                          <option value="CUM">CUM</option>
                                          <option value="NO CUM">NO CUM</option>
                                        </select>
                                      </td>
                                      <td>
                                        <input type="text" class="form-control" name="justificacionMS4" [(ngModel)]="MS.justificacionMS4">
                                      </td>
                                    </tr>
                                    <tr>
                                      <td class="title">
                                        MS5. Si es utilizado estiércol como abono, este es compostado, manteniendo una temperatura entre 55 °C y 66 °C
                                        durante mínimo 3 meses y se volteo como mínimo cada semana. Favor indique en &quot;comentarios&quot; el origen (misma finca,
                                        vecinos, comercial)
                                      </td>
                                      <td>
                                        <select class="form-control" name="respuestaMS5" [(ngModel)]="MS.respuestaMS5">
                                          <option value="NA">NA</option>
                                          <option value="CUM">CUM</option>
                                          <option value="NO CUM">NO CUM</option>
                                        </select>
                                      </td>
                                      <td>
                                        <input type="text" class="form-control" name="justificacionMS5" [(ngModel)]="MS.justificacionMS5">
                                      </td>
                                    </tr>
                                    <tr>
                                      <td class="title">
                                        Comentario/Otras prácticas de manejo del suelo, preparación de abonos, control de temperaturas:
                                      </td>
                                      <td colspan="2">
                                        <input type="text" class="form-control" name="comentarioMS" [(ngModel)]="MS.comentarioMS">
                                      </td>
                                    </tr>
                                  </tbody>
                                </table>
                              </div>
                            </div>
                            <div class="row pager">
                              <div class="col pull-left">
                                <button type="submit" class="btn btn-info btn-fill"  matStepperPrevious>Atras</button>
                              </div>

                              <div class="col-ml-5 pull-right ">
                                <button type="submit" class="btn btn-info btn-fill " (click) = "onSubmit()" matStepperNext>siguiente</button>
                              </div>
                          </div>
                          </form>
                        </mat-step>
                          <!-- end mat-step second -->

                          <!-- mat-step three -->
                          <mat-step>
                            <!-- tercer step -->
                              <ng-template matStepLabel></ng-template>

                              <form>
                            <div class="form-group">
                              <h5 class="title mb-3">RESULTADOS DE LA EVALUACION ACTUAL</h5>
                              <div class="table-responsive table-full-width">
                                <table class="table table-striped table-bordered">
                                  <thead>
                                        <tr>
                                            <th class="title">Código Criterio</th>
                                            <th class="title">Hallazgos Relevantes Observados</th>
                                            <th class="title">Plan de Acción Propuesto</th>
                                            <th class="title title-center">
                                              Aceptado/Entendido <br>
                                              tiempo de cumplimiento <br>
                                              acordado
                                            </th>
                                            <th class="title title-center">
                                              accion
                                            </th>
                                        </tr>
                                  </thead>
                                  <tbody>
                                      <tr *ngFor="let resultado of ResultadoEvaluacion; let i = index">
                                        <td>
                                          <input type="text" class="form-control" name="{{resultado.codigo}}" [(ngModel)]="resultado.codigo">
                                        </td>

                                        <td>
                                          <input type="text" class="form-control" name="{{resultado.hallazgo}}" [(ngModel)]="resultado.hallazgo">
                                        </td>

                                        <td>
                                          <input type="text" class="form-control" name="{{resultado.accionPropuesta}}" [(ngModel)]="resultado.accionPropuesta">
                                        </td>

                                        <td>
                                          <input type="text" class="form-control" name="{{resultado.tiempoAcordado}}" [(ngModel)]="resultado.tiempoAcordado">
                                        </td>

                                        <td>
                                          <button class="badge btn" (click)="deleteResultadoEvaluacion(i)">
                                            <img src="assets/dejar.png" alt="">
                                          </button>
                                        </td>

                                      </tr>
                                      <tr>
                                        <td>
                                          <input type="text" class="form-control" name="{{NewResultadoEvaluacion.codigo}}+index" [(ngModel)]="NewResultadoEvaluacion.codigo">
                                        </td>

                                        <td>
                                          <input type="text" class="form-control" name="{{NewResultadoEvaluacion.hallazgo}}+index" [(ngModel)]="NewResultadoEvaluacion.hallazgo">
                                        </td>

                                        <td>
                                          <input type="text" class="form-control" name="{{NewResultadoEvaluacion.accionPropuesta}}+index" [(ngModel)]="NewResultadoEvaluacion.accionPropuesta">
                                        </td>

                                        <td>
                                          <input type="text" class="form-control" name="{{NewResultadoEvaluacion.tiempoAcordado}}+index" [(ngModel)]="NewResultadoEvaluacion.tiempoAcordado">
                                        </td>

                                        <td>
                                            <button  class="badge btn" (click)="addResultadoEvaluacion()">
                                              <img src="assets/comprobado.png" alt="">
                                            </button>
                                        </td>
                                      </tr>
                                  </tbody>
                                </table>
                              </div>
                            </div>
                            <div class="row">
                              <div class="col-md-11">
                                <div class="form-group">
                                  <label>OPORTUNIDADES DE MEJORA IDENTIFICADAS.</label>
                                  <input type="text" class="form-control" name="oportunidadMejora" [(ngModel)]="visitaAuditoria.oportunidadMejora">
                                </div>
                              </div>
                            </div>
                            <div class="row">
                              <div class="col-md-6">
                                <label>DECISIÓN FINAL</label>
                                <select class="form-control" name="decicionFinal" [(ngModel)]="visitaAuditoria.decicionFinal">
                                  <option value="Aprobado">Aprobado</option>
                                  <option value="Aprobado con condiciones 1er vez">Aprobado con condiciones 1er vez</option>
                                  <option value="Aprobado con condiciones 2da vez">Aprobado con condiciones 2da vez</option>
                                  <option value="Aprobado con condiciones 3er vez No Aprobado">Aprobado con condiciones 3er vez No Aprobado</option>
                                </select>
                              </div>
                            </div>

                            <div id="Guardar">
                              <button type="submit" class="btn btn-success btn-fill" (click) = "mensajeConfirmacion()">Guardar</button>
                            </div>
                              </form>
                          </mat-step>
                          <!-- end mat-step three -->
                          </mat-horizontal-stepper>

                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Modal: modalCart -->
<div class="modal fade fadebd-example-modal-lg" data-backdrop="static" id="modalCart" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <!--Header-->
      <div class="modal-header">
        <h4 class="title white-text">Lista de productores</h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true" class="white-text title">X</span>
        </button>
      </div>
      <!--Body-->
      <div class="modal-body">

        <h5 class="title title-center"> Selecionar Productor</h5>

        <!-- Table -->
        <div class="table-responsive table-full-width">
        <table class="table table-hover table-striped">
            <thead>
            <tr>
                <th class="title title-center">Cedula</th>
                <th class="title title-center">Nombre</th>
                <th class="title title-center">Codigo</th>
                <th class="title title-center">Finca</th>
                <th class="title title-center">Municipio</th>
                <th class="title title-center">Vereda</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor = "let productor of productores" (click)="getProductor(productor.id)" data-dismiss="modal" aria-label="Close">
                <td>{{productor.id}}</td>
                <td>{{productor.nombre}}</td>
                <td>{{productor.codigoCafetero}}</td>
                <td>{{productor.nombrePredio}}</td>
                <td>{{productor.municipio}}</td>
                <td>{{productor.vereda}}</td>
            </tr>
            </tbody>
        </table>
        </div>
        <!-- end table -->

      </div>
      <!--Footer-->
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-primary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
<!-- Modal: modalCart -->
<!-- end of modal -->
